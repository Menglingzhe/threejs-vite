var H=Object.defineProperty,I=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var y=(i,t,e)=>t in i?H(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,C=(i,t)=>{for(var e in t||(t={}))W.call(t,e)&&y(i,e,t[e]);if(x)for(var e of x(t))N.call(t,e)&&y(i,e,t[e]);return i},P=(i,t)=>I(i,B(t));import{c as m,A as O,_ as D,u as T,a as V,r as G,o as Y,b as q,d as p,e as g,w as A,v as E,f as r,g as c,L as J,F as _,h as w,i as Q,n as f,j as S,t as b,k as F,l as U}from"./index.3aeb01c0.js";import{C as X,S as Z,P as K,W as ee,A as te,R as ie,E as ne,O as se,G as re,a as ae,L as oe}from"./GLTFLoader.caf95867.js";import{g as ce}from"./index.3d57ca0b.js";var le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M926.8 397.1l-396-288a31.81 31.81 0 00-37.6 0l-396 288a31.99 31.99 0 00-11.6 35.8l151.3 466a32 32 0 0030.4 22.1h489.5c13.9 0 26.1-8.9 30.4-22.1l151.3-466c4.2-13.2-.5-27.6-11.7-35.8zM838.6 417l-98.5 32-200-144.7V199.9L838.6 417zM466 567.2l-89.1 122.3-55.2-169.2L466 567.2zm-116.3-96.8L484 373.3v140.8l-134.3-43.7zM512 599.2l93.9 128.9H418.1L512 599.2zm28.1-225.9l134.2 97.1L540.1 514V373.3zM558 567.2l144.3-46.9-55.2 169.2L558 567.2zm-74-367.3v104.4L283.9 449l-98.5-32L484 199.9zM169.3 470.8l86.5 28.1 80.4 246.4-53.8 73.9-113.1-348.4zM327.1 853l50.3-69h269.3l50.3 69H327.1zm414.5-33.8l-53.8-73.9 80.4-246.4 86.5-28.1-113.1 348.4z"}}]},name:"radar-chart",theme:"outlined"},de=le;function R(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),n.forEach(function(s){he(i,s,e[s])})}return i}function he(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var L=function(t,e){var n=R({},t,e.attrs);return m(O,R({},n,{icon:de}),null)};L.displayName="RadarChartOutlined";L.inheritAttrs=!1;var ue=L,me={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 00-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 100 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 00-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 00-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6z"}}]},name:"shopping-cart",theme:"outlined"},pe=me;function j(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),n.forEach(function(s){ge(i,s,e[s])})}return i}function ge(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var z=function(t,e){var n=j({},t,e.attrs);return m(O,j({},n,{icon:pe}),null)};z.displayName="ShoppingCartOutlined";z.inheritAttrs=!1;var fe=z,ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.6 405.1l-203-253.7a6.5 6.5 0 00-5-2.4H306.4c-1.9 0-3.8.9-5 2.4l-203 253.7a6.5 6.5 0 00.2 8.3l408.6 459.5c1.2 1.4 3 2.1 4.8 2.1 1.8 0 3.5-.8 4.8-2.1l408.6-459.5a6.5 6.5 0 00.2-8.3zM645.2 206.4l34.4 133.9-132.5-133.9h98.1zm8.2 178.5H370.6L512 242l141.4 142.9zM378.8 206.4h98.1L344.3 340.3l34.5-133.9zm-53.4 7l-44.1 171.5h-93.1l137.2-171.5zM194.6 434.9H289l125.8 247.7-220.2-247.7zM512 763.4L345.1 434.9h333.7L512 763.4zm97.1-80.8L735 434.9h94.4L609.1 682.6zm133.6-297.7l-44.1-171.5 137.2 171.5h-93.1z"}}]},name:"sketch",theme:"outlined"},_e=ve;function k(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),n.forEach(function(s){we(i,s,e[s])})}return i}function we(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var M=function(t,e){var n=k({},t,e.attrs);return m(O,k({},n,{icon:_e}),null)};M.displayName="SketchOutlined";M.inheritAttrs=!1;var be=M;class Oe{constructor(t,e){this.container=document.querySelector(t),this.camera,this.scene,this.model,this.renderer,this.panzi,this.animateAction,this.progressFn,this.clock=new X,this.onFinish=e,this.init(),this.animate()}init(){this.initScene(),this.initCamera(),this.initRenderer(),this.addMesh(),window.addEventListener("resize",this.onWindowResize.bind(this)),window.addEventListener("mousewheel",this.onMouseWheel.bind(this))}initScene(){this.scene=new Z,this.setEnvMap("000")}initCamera(){this.camera=new K(45,window.innerWidth/window.innerHeight,.25,200),this.camera.position.set(-1.8,.6,2.7)}initRenderer(){this.renderer=new ee({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.toneMapping=te,this.renderer.toneMappingExposure=3,this.container.appendChild(this.renderer.domElement)}setEnvMap(t){new ie().setPath("./files/hdr/").load(t+".hdr",e=>{e.mapping=ne,this.scene.background=e,this.scene.environment=e})}render(){var t=this.clock.getDelta();this.mixer&&this.mixer.update(t),this.renderer.render(this.scene,this.camera)}animate(){this.renderer.setAnimationLoop(this.render.bind(this))}initControl(){this.control=new se(this.camera,this.renderer.domElement)}onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}setModel(t){return new Promise((e,n)=>{new re().setPath("files/gltf/").load(t,o=>{this.model&&this.model.removeFromParent(),this.model=o.scene.children[0],t=="bag2.glb"&&!this.panzi&&(this.panzi=o.scene.children[5],this.scene.add(o.scene),this.camera=o.cameras[0],this.mixer=new ae(o.scene.children[1]),this.animateAction=this.mixer.clipAction(o.animations[0]),this.animateAction.setDuration(20).setLoop(oe),this.animateAction.clampWhenFinished=!0,this.spotlight1=o.scene.children[2].children[0],this.spotlight1.intensity=1,this.spotlight2=o.scene.children[3].children[0],this.spotlight2.intensity=1,this.spotlight3=o.scene.children[4].children[0],this.spotlight3.intensity=1),this.scene.add(o.scene),e(this.modelName+"\u6A21\u578B\u6DFB\u52A0\u6210\u529F")},o=>{this.progressFn(o)})})}onProgress(t){this.progressFn=t}async addMesh(){let t=await this.setModel("bag2.glb");this.onFinish(t)}onMouseWheel(t){let e=t.deltaY>0?1:-1;this.animateAction.setEffectiveTimeScale(e),this.animateAction.paused=!1,this.animateAction.play(),this.timeoutid&&clearTimeout(this.timeoutid),this.timeoutid=setTimeout(()=>{this.animateAction.halt(.5)},300)}}const Se={class:"loading"},Le={class:"product",id:"product"},ze={class:"title"},Me={class:"content"},xe=S("\u4EA7\u54C1\u63A8\u8350 "),ye={class:"prods"},Ce=["onClick"],Pe={class:"prod-title"},Ae={class:"img"},Ee=["src","alt"],Fe=S("\u52A0\u5165\u8D2D\u7269\u8F66 "),Re=S("\u5207\u6362\u4F7F\u7528\u573A\u666F "),je={class:"scenes"},ke=["onClick"],$e=["src","alt"],He={setup(i){const t=T();V();const e=G({products:[],scenes:[],isLoading:!0,pIndex:0,sIndex:0,base3d:{},descIndex:0,progress:0});Y(async()=>{let l=await ce();e.products=l.list,e.scenes=l.hdr,e.base3d=new Oe("#product",s),e.base3d.onProgress(d=>{let h=d.loaded/d.total;h=h.toFixed(2)*100,e.progress=h})}),window.addEventListener("mousewheel",l=>{l.deltaY>0&&t.commit("setFullscreen",!0),l.deltaY<0&&t.commit("setFullscreen",!1)});function n(l,d){e.pIndex=d,e.base3d.setModel(l.modelName)}function s(){e.isLoading=!1}function o(l,d){e.sIndex=d,e.base3d.setEnvMap(l)}function $(l){let d=P(C({},l),{num:1}),h=0;t.state.buycarts.some((u,v)=>d.id==u.id?(h=v,!0):!1)?t.commit("addBuycartsNum",h):t.commit("addBuycarts",d)}return window.addEventListener("mousewheel",l=>{let d=e.base3d.animateAction._clip.duration,h=e.base3d.animateAction.time,a=Math.floor(h/d*4);e.descIndex=a}),(l,d)=>{const h=q("a-button");return p(),g(_,null,[A(c("div",Se,[m(J,{progress:r(e).progress},null,8,["progress"])],512),[[E,r(e).isLoading]]),A(c("div",Le,[r(e).products[r(e).pIndex]?(p(!0),g(_,{key:0},w(r(e).products[r(e).pIndex].desc,(a,u)=>(p(),g("div",{class:f(["desc",{active:r(e).descIndex==u}])},[c("h1",ze,b(a.title),1),c("p",Me,b(a.content),1)],2))),256)):Q("",!0),c("div",{class:f(["prod-list",{hidden:r(t).state.isFullscreen}])},[c("h1",null,[m(r(be)),xe]),c("div",ye,[(p(!0),g(_,null,w(r(e).products,(a,u)=>(p(),g("div",{class:f(["prod-item",{active:u==r(e).pIndex}]),onClick:v=>n(a,u)},[c("div",Pe,b(a.title),1),c("div",Ae,[c("img",{src:a.imgsrc,alt:a.title},null,8,Ee)]),m(h,{type:"primary",block:"",onClick:U(v=>$(a),["stop"])},{icon:F(()=>[m(r(fe))]),default:F(()=>[Fe]),_:2},1032,["onClick"])],10,Ce))),256))])],2),c("div",{class:f(["scene-list",{hidden:r(t).state.isFullscreen}])},[c("h3",null,[m(r(ue)),Re]),c("div",je,[(p(!0),g(_,null,w(r(e).scenes,(a,u)=>(p(),g("div",{class:"scenes-item",onClick:v=>o(a,u)},[c("img",{class:f({active:u==r(e).sIndex}),src:`./files/hdr/${a}.jpg`,alt:a},null,10,$e)],8,ke))),256))])],2)],512),[[E,!r(e).isLoading]])],64)}}};var De=D(He,[["__scopeId","data-v-536475b9"]]);export{De as default};
